!function(e,n,t){"use strict";var a,r,u,l,c,d,w,i,o,p,m,s,y,f;return r="yacal",a=864e5,u={d:"<#day#>",dt:"<#time#>",we:"<#weekend#>",t:"<#today#>",s:"<#selected#>",a:"<#active#>",w:"<#week#>",ws:"<#weekSelected#>",wt:"<#weekTime#>",wd:"<#weekday#>",wdnam:"<#weekdayName#>",wdnum:"<#weekdayNumber#>",mnam:"<#monthName#>",mnum:"<#monthNumber#>",md:"<#monthDays#>",y:"<#year#>",nav:"<#nav#>",prev:"<#prev#>",next:"<#next#>"},o=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},s=function(e){var n;return 0===(n=e.getDay())||6===n},i=function(e,n,t){var a,r;return a=o(n),r=o(t),a&&r?e>=n&&t>=e:a?e>=n:r?t>=e:!0},f=function(e){return e.setHours(0,0,0,0)},m=function(e){return f(e)===f(new Date)},p=function(e){return e%4===0&&e%100!==0||e%400===0},c=function(e,n){return[31,p(e)?29:28,31,30,31,30,31,31,30,31,30,31][n]},d=function(e){var n;return n=new Date(e.getFullYear(),0,1),Math.ceil(((e-n)/a+n.getDay()+1)/7)},w=function(e){return new Date(e.getTime()-e.getDay()*a)},l=function(e,n){return new Date(e.getFullYear(),e.getMonth()+n,1)},y=function(e,n,t,a){return"<"+e+" "+(n?' class="'+n+'" ':"")+(a?"data-"+a:"")+">"+(t?t+"</"+e+">":"")},e.fn.yacal=function(n){return this.each(function(t){var r,o,p,y,v,D,h,k,g,x,M,N,T,F,O,S;return r=h=null,g={},p={},D=k=v=y=o=null,x=function(e){return f(h)===f(e)},M=function(e){return i(h,w(e),new Date(e.getTime()+(7-e.getDay())*a-1))},S=function(){return g.nav.replace(u.prev,p.prev).replace(u.next,p.next)},F=function(e){return g.day.replace(u.d,e.getDate()).replace(u.dt,e.getTime()).replace(u.we,s(e)?" weekend":"").replace(u.t,m(e)?" today":"").replace(u.s,x(e)?" selected":"").replace(u.a,i(e,v,y)?" active":"").replace(u.wd,e.getDay())},O=function(e,n){var t,a,r,l,i,o,m;if(null==n&&(n=!1),i=c(e.getYear(),e.getMonth()),r=e.getMonth(),m=e.getFullYear(),l="",t=0,k){for(o=0,l+=g.weekOpen.replace(u.w,o).replace(u.wt,"").replace(u.ws,"");6>=o;)l+=g.weekday.replace(u.wdnam,p.weekdays[o]).replace(u.wdnum,o),o++;l+=g.weekClose}for(;i>t;)a=new Date(m,r,t+1),(0===t||0===a.getDay())&&(l+=g.weekOpen.replace(u.w,d(a)).replace(u.wt,w(a)).replace(u.ws,M(a)?" selected":"")),l+=F(a,g.day),(t===i-1||6===a.getDay())&&(l+=g.weekClose),t++;return g.month.replace(u.mnum,r).replace(u.mnam,p.months[r]).replace(u.nav,n?S():"").replace(u.y,m).replace(u.md,l)},T=function(n){var t,a,u,c;if(u="",D)for(c=D;c>0;)u+=O(l(r,-c)),c--;if(u+=O(r,!0),D)for(a=1;D>=a;)u+=O(l(r,+a)),a++;return e(n).html(""),e(n).append(e(g.wrap).append(u)),t=e(n).find(".yclNav"),t.find(".prev").on("click",function(){return r=l(r,-1),T(e(n))}),t.find(".next").on("click",function(){return r=l(r,1),T(e(n))})},N=e.extend(!0,{},e.fn.yacal.defaults,n),e(this).data()&&(N=e.extend(!0,{},N,e(this).data())),r=h=new Date(N.date),g=N.tpl,p=N.i18n,D=parseInt(N.nearMonths),k=!!N.showWeekdays,N.minDate&&(v=new Date(N.minDate)),N.maxDate&&(y=new Date(N.maxDate)),o=parseInt(N.firstDay),T(this)})},e.fn.yacal.defaults={date:new Date,nearMonths:0,showWeekdays:1,minDate:null,maxDate:null,tpl:{day:y("a","day day"+u.wd+u.we+u.t+u.s+u.a,u.d,'time="'+u.dt+'"'),weekday:y("i","wday wday"+u.wdnum,u.wdnam),weekOpen:y("div","week week"+u.w+u.ws,null,'time="'+u.wt+'"'),weekClose:"</div>",month:y("div","month month"+u.mnum,u.nav+y("h4",null,u.mnam+" "+u.y)+u.md),nav:y("div","yclNav",y("a","prev",y("span",null,u.prev))+y("a","next",y("span",null,u.next))),wrap:y("div","wrap")},i18n:{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],prev:"prev",next:"next"}},e.fn.yacal.version="0.1.1",e("."+r).yacal()}(jQuery,document,window);