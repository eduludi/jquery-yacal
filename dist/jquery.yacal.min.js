!function(e,n,t){"use strict";var a,r,l,u,c,d,w,i,o,m,p,s;return a="yacal",r={d:"<#day#>",dt:"<#time#>",we:"<#weekend#>",t:"<#today#>",s:"<#selected#>",a:"<#active#>",w:"<#week#>",ws:"<#weekSelected#>",wt:"<#weekTime#>",wd:"<#weekday#>",wdnam:"<#weekdayName#>",wdnum:"<#weekdayNumber#>",mnam:"<#monthName#>",mnum:"<#monthNumber#>",md:"<#monthDays#>",y:"<#year#>",nav:"<#nav#>",prev:"<#prev#>",next:"<#next#>"},w=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},m=function(e){var n;return 0===(n=e.getDay())||6===n},d=function(e,n,t){var a,r;return a=w(n),r=w(t),a&&r?e>=n&&t>=e:a?e>=n:r?t>=e:!0},s=function(e){return e.setHours(0,0,0,0)},o=function(e){return s(e)===s(new Date)},i=function(e){return e%4===0&&e%100!==0||e%400===0},u=function(e,n){return[31,i(e)?29:28,31,30,31,30,31,31,30,31,30,31][n]},c=function(e){var n;return n=new Date(e.getFullYear(),0,1),Math.ceil(((e-n)/864e5+n.getDay()+1)/7)},l=function(e,n){return new Date(e.getFullYear(),e.getMonth()+n,1)},p=function(e,n,t,a){return"<"+e+" "+(n?' class="'+n+'" ':"")+(a?"data-"+a:"")+">"+(t?t+"</"+e+">":"")},e.fn.yacal=function(n){return this.each(function(t){var a,w,i,p,y,f,v,D,h,k,g,x,M,N,T,F;return a=v=null,h={},i={},f=D=y=p=w=null,k=function(e){return s(v)===s(e)},g=function(e){var n;return n=new Date(e.getTime()+(864e5*(7-e.getDay())-1)),d(v,e,n)},F=function(){return h.nav.replace(r.prev,i.prev).replace(r.next,i.next)},N=function(e){return h.day.replace(r.d,e.getDate()).replace(r.dt,e.getTime()).replace(r.we,m(e)?" weekend":"").replace(r.t,o(e)?" today":"").replace(r.s,k(e)?" selected":"").replace(r.a,d(e,y,p)?" active":"").replace(r.wd,e.getDay())},T=function(e,n){var t,a,l,d,w,o,m;if(null==n&&(n=!1),w=u(e.getYear(),e.getMonth()),l=e.getMonth(),m=e.getFullYear(),d="",t=0,D){for(o=0,d+=h.weekOpen.replace(r.w,o).replace(r.wt,"").replace(r.ws,"");6>=o;)d+=h.weekday.replace(r.wdnam,i.weekdays[o]).replace(r.wdnum,o),o++;d+=h.weekClose}for(;w>t;)a=new Date(m,l,t+1),(0===t||0===a.getDay())&&(d+=h.weekOpen.replace(r.w,c(a)).replace(r.wt,a.getTime()).replace(r.ws,g(a)?" selected":"")),d+=N(a,h.day),(t===w-1||6===a.getDay())&&(d+=h.weekClose),t++;return h.month.replace(r.mnum,l).replace(r.mnam,i.months[l]).replace(r.nav,n?F():"").replace(r.y,m).replace(r.md,d)},M=function(n){var t,r,u;if(r="",f)for(u=f;u>0;)r+=T(l(a,-u)),u--;if(r+=T(a,!0),f)for(t=1;f>=t;)r+=T(l(a,+t)),t++;return e(n).html(""),e(n).append(e(h.wrap).append(r)),e(n).find(".yclPrev").on("click",function(){return a=l(a,-1),M(e(n))}),e(n).find(".yclNext").on("click",function(){return a=l(a,1),M(e(n))})},x=e.extend(!0,{},e.fn.yacal.defaults,n),e(this).data()&&(x=e.extend(!0,{},x,e(this).data())),a=v=new Date(x.date),h=x.tpl,i=x.i18n,f=parseInt(x.nearMonths),D=!!x.showWeekdays,x.minDate&&(y=new Date(x.minDate)),x.maxDate&&(p=new Date(x.maxDate)),w=parseInt(x.firstDay),M(this)})},e.fn.yacal.defaults={date:new Date,nearMonths:0,showWeekdays:1,minDate:null,maxDate:null,tpl:{day:p("a","day day"+r.wd+r.we+r.t+r.s+r.a,r.d,'time="'+r.dt+'"'),weekday:p("i","wday wday"+r.wdnum,r.wdnam),weekOpen:p("div","week week"+r.w+r.ws,null,'time="'+r.wt+'"'),weekClose:"</div>",month:p("div","month month"+r.mnum,r.nav+p("h4",null,r.mnam+" "+r.y)+r.md),nav:p("div","nav",p("a","yclPrev",p("span",null,r.prev))+p("a","yclNext",p("span",null,r.next))),wrap:p("div","wrap")},i18n:{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],prev:"prev",next:"next"}},e.fn.yacal.version="0.1.1",e("."+a).yacal()}(jQuery,document,window);