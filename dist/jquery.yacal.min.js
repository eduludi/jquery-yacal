!function(e,a,n){"use strict";var t,r,c,s,l,u,o,d,i,m,w;return t="yacal",r={ts:"<#timestamp#>",d:"<#day#>",we:"<#weekend#>",t:"<#today#>",s:"<#selected#>",a:"<#active#>",wn:"<#weekNumber#>",wd:"<#weekday#>",wdnam:"<#weekdayName#>",wdnum:"<#weekdayNumber#>",mnam:"<#monthName#>",mnum:"<#monthNumber#>",md:"<#monthDays#>",y:"<#year#>",nav:"<#nav#>",prev:"<#prev#>",next:"<#next#>"},o=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},m=function(e){var a;return 0===(a=e.getDay())||6===a},u=function(e,a,n){var t,r;return t=o(a),r=o(n),t&&r?e>=a&&n>=e:t?e>=a:r?n>=e:!0},w=function(e){return e.setHours(0,0,0,0)},i=function(e){return w(e)===w(new Date)},d=function(e){return e%4===0&&e%100!==0||e%400===0},s=function(e,a){return[31,d(e)?29:28,31,30,31,30,31,31,30,31,30,31][a]},l=function(e){var a;return a=new Date(e.getFullYear(),0,1),Math.ceil(((e-a)/864e5+a.getDay()+1)/7)},c=function(e,a){return new Date(e.getFullYear(),e.getMonth()+a,1)},e.fn.yacal=function(a){return this.each(function(n){var t,o,d,p,y,v,f,h,D,k,g;return t=p=null,y={},o={},d={},v=function(e){return w(p)===w(e)},g=function(){return y.nav.replace(r.prev,o.prev).replace(r.next,o.next)},D=function(e){return y.day.replace(r.ts,e.getTime()).replace(r.d,e.getDate()).replace(r.we,m(e)?" weekend":"").replace(r.t,i(e)?" today":"").replace(r.s,v(e)?" selected":"").replace(r.a,u(e,d.minDate,d.maxDate)?" active":"").replace(r.wd,e.getDay())},k=function(e,a){var n,t,c,u,i,m,w;if(null==a&&(a=!1),i=s(e.getYear(),e.getMonth()),c=e.getMonth(),w=e.getFullYear(),u="",d.showWD){for(m=0,u+=y.weekOpen.replace(r.wn,m);6>=m;)u+=y.weekday.replace(r.wdnam,o.weekdays[m]).replace(r.wdnum,m),m++;u+=y.weekClose}for(n=0;i>n;)t=new Date(w,c,n+1),(0===n||0===t.getDay())&&(u+=y.weekOpen.replace(r.wn,l(t))),u+=D(t,y.day),(n===i-1||6===t.getDay())&&(u+=y.weekClose),n++;return y.month.replace(r.mnum,c).replace(r.mnam,o.months[c]).replace(r.nav,a?g():"").replace(r.y,w).replace(r.md,u)},h=function(a){var n,r,s;if(r="",d.nearMonths)for(s=d.nearMonths;s>0;)r+=k(c(t,-s)),s--;if(r+=k(t,!0),d.nearMonths)for(n=1;n<=d.nearMonths;)r+=k(c(t,+n)),n++;return e(a).html(""),e(a).append(e(y.wrap).append(r)),e(a).find(".yclPrev").on("click",function(){return t=c(t,-1),h(e(a))}),e(a).find(".yclNext").on("click",function(){return t=c(t,1),h(e(a))})},f=e.extend(!0,{},e.fn.yacal.defaults,a),e(this).data()&&(f=e.extend(!0,{},f,e(this).data())),t=p=new Date(f.date),y=f.tpl,o=f.i18n,d={nearMonths:parseInt(f.nearMonths),showWD:!!f.showWeekdays,minDate:f.minDate?new Date(f.minDate):void 0,maxDate:f.maxDate?new Date(f.maxDate):void 0,firstDay:parseInt(f.firstDay)},h(this)})},e.fn.yacal.defaults={date:new Date,nearMonths:0,showWeekdays:!0,mimDate:null,maxDate:null,tpl:{day:'<a class="day day'+r.wd+r.we+r.t+r.s+r.a+'" data-time="'+r.ts+'">'+r.d+"</a>",weekday:'<i class="wday wday'+r.wdnum+'">'+r.wdnam+"</i>",weekOpen:'<div class="week week'+r.wn+'">',weekClose:"</div>",month:'<div class="month month'+r.mnum+'">'+r.nav+"<h4>"+r.mnam+" "+r.y+"</h4>"+r.md+"</div>",nav:'<div class="nav"><a class="yclPrev"><span>'+r.prev+'</span></a><a class="yclNext"><span>'+r.next+"</span></a></div>",wrap:'<div class="wrap"></div>'},i18n:{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],prev:"prev",next:"next"}},e.fn.yacal.version="0.1.1",e("."+t).yacal()}(jQuery,document,window);